---
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import logo from "../../assets/timbuilding.svg";
import Button from "../ui/Button.astro";
import ThemeToggle from "../ui/ThemeToggle.astro";
---

<header
  class="border-border/45 fixed z-[10000] box-border flex h-28 w-full items-center border-b bg-transparent px-4 py-3 transition-all duration-300 lg:py-0"
  x-data="{ open: false, scrolled: false }"
  x-init="window.addEventListener('scroll', () => { scrolled = window.pageYOffset > 10 })"
  :class="{ 'bg-[var(--background-color)] shadow-md': scrolled, 'bg-transparent': !scrolled }"
>
  <div
    class="flex w-full items-center justify-between lg:mx-auto lg:max-w-[80rem] lg:gap-6"
    :class="{ 'text-[var(--text-color)]': scrolled, 'text-white': !scrolled }"
  >
    <!--Nav Logo-->
    <a
      href="/"
      class="z-10 m-0 mr-auto flex h-full w-2/5 max-w-[9.125rem] items-center justify-center lg:h-[4.0625rem] lg:w-[18.4%] lg:max-w-[21.875rem]"
      aria-label="back to home"
    >
      <Image src={logo} alt="logo" height={90} aria-hidden="true" />
    </a>

    <!--Navigation List - Desktop (Horizontal)-->
    <nav class="hidden lg:block">
      <ul class="flex items-center space-x-6">
        <li>
          <a
            href="/"
            class="hover:text-text text-lg font-medium transition-colors"
            >Home</a
          >
        </li>
        <li>
          <a
            href="/products"
            class="hover:text-text text-lg font-medium transition-colors"
            >Products</a
          >
        </li>
      </ul>
    </nav>

    <ThemeToggle />

    <!--Mobile Nav Toggle-->
    <Button class="lg:hidden" size={"small"} @click="open = !open">
      <span class="sr-only">Menu</span>
      <span x-show="!open"><Icon name="menu" size={24} /></span>
      <span x-show="open"><Icon name="x" size={24} /></span>
    </Button>

    <!--Navigation List - Mobile (Dropdown)-->
    <nav
      x-show="open"
      x-transition:enter="transition ease-out duration-200"
      x-transition:enter-start="opacity-0 -translate-y-4"
      x-transition:enter-end="opacity-100 translate-y-0"
      x-transition:leave="transition ease-in duration-150"
      x-transition:leave-start="opacity-100 translate-y-0"
      x-transition:leave-end="opacity-0 -translate-y-4"
      class="border-border/45 absolute top-28 right-0 left-0 border-b shadow-lg transition-all duration-300 lg:hidden"
      :class="{ 'bg-[var(--background-color)]': scrolled, 'bg-transparent backdrop-blur-sm': !scrolled }"
    >
      <ul class="flex flex-col space-y-4 px-6 py-4">
        <li>
          <a
            href="/"
            class="hover:text-primary text-text block text-lg font-medium transition-colors"
            >Home</a
          >
        </li>
        <li>
          <a
            href="/products"
            class="hover:text-primary text-text block text-lg font-medium transition-colors"
            >Products</a
          >
        </li>
        <li>
          <a
            href="/contact"
            class="hover:text-primary text-text block text-lg font-medium transition-colors"
            >Contact</a
          >
        </li>
      </ul>
    </nav>
  </div>
</header>
