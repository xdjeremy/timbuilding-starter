---
import { Icon } from "astro-icon/components";
import Button from "./Button.astro";
import ThemeToggle from "./ThemeToggle.astro";
import { Image } from "astro:assets";
import logo from '../../assets/timbuilding.svg'
---

<header
  class="fixed z-[10000] box-border w-full bg-white px-4 py-3 shadow-[rgba(149,157,165,0.2)_0px_8px_24px] lg:py-0"
  id="cs-navigation"
>
  <div
    class="flex w-full items-center justify-end lg:mx-auto lg:max-w-[80rem] lg:gap-6"
  >
    <!--Nav Logo-->
    <a
      href=""
      class="z-10 m-0 mr-auto flex h-full w-2/5 max-w-[9.125rem] items-center justify-center lg:h-[4.0625rem] lg:w-[18.4%] lg:max-w-[21.875rem]"
      aria-label="back to home"
    >
      <Image src={logo} alt="logo" height="29" aria-hidden="true" />
    </a>
    <!--Navigation List-->
    <nav class="w-full" role="navigation">
      <!--Mobile Nav Toggle-->
      <button
        class="w-clamp-[2.75rem,6vw,3rem] h-clamp-[2.75rem,6vw,3rem] flex items-center justify-center rounded border-none bg-transparent lg:hidden"
        aria-label="mobile menu toggle"
      >
        <div
          class="w-clamp-[1.5rem,2vw,1.75rem] h-clamp-[0.875rem,1.5vw,1rem] relative"
          aria-hidden="true"
        >
          <span
            class="absolute top-0 left-1/2 h-0.5 w-full -translate-x-1/2 rounded-sm bg-[#1a1a1a] transition-all duration-500"
            aria-hidden="true"></span>
          <span
            class="absolute top-1/2 left-1/2 h-0.5 w-full -translate-x-1/2 -translate-y-1/2 rounded-sm bg-[#1a1a1a] transition-all duration-500"
            aria-hidden="true"></span>
          <span
            class="absolute bottom-0 left-1/2 h-0.5 w-full -translate-x-1/2 rounded-sm bg-[#1a1a1a] transition-all duration-300"
            aria-hidden="true"></span>
        </div>
      </button>
      <!-- Wrapper for the navigation menu -->
      <div
        class="absolute top-full left-0 z-[-1] w-full origin-top scale-y-0 overflow-hidden bg-white opacity-0 shadow-[inset_rgba(0,0,0,0.2)_0px_8px_24px] transition-all duration-400 lg:static lg:z-auto lg:scale-y-100 lg:overflow-visible lg:opacity-100 lg:shadow-none"
      >
        <ul
          id="cs-expanded"
          class="lg:gap-clamp-[1.25rem,2.6vw,2.25rem] mt-12 mb-0 flex max-h-[65vh] w-full flex-col items-center justify-start gap-5 overflow-scroll py-0 lg:mt-0 lg:max-h-none lg:flex-row lg:overflow-visible lg:py-0"
          aria-expanded="false"
        >
          <li
            class="w-full -translate-y-[4.375rem] list-none text-center opacity-0 transition-all delay-[0.05s] duration-[0.6s,0.9s] lg:w-auto lg:translate-y-0 lg:py-8 lg:opacity-100"
          >
            <a
              href=""
              class="text-clamp-[1rem,2.5vw,1.5rem] lg:text-clamp-[0.875rem,1vw,1rem] cs-active relative inline-block leading-[1.2em] text-[var(--headerColor)] after:absolute after:bottom-[-0.125rem] after:left-0 after:block after:h-px after:w-full after:bg-current lg:leading-[1.5em] lg:text-[var(--bodyTextColor)] lg:after:h-0.5 lg:after:w-0 lg:after:bg-[var(--primary)] lg:after:transition-[width] lg:after:duration-300 lg:hover:after:w-full"
            >
              Home
            </a>
          </li>
          <li
            class="w-full -translate-y-[4.375rem] list-none text-center opacity-0 transition-all delay-[0.1s] duration-[0.6s,0.9s] lg:w-auto lg:translate-y-0 lg:py-8 lg:opacity-100"
          >
            <a
              href=""
              class="text-clamp-[1rem,2.5vw,1.5rem] lg:text-clamp-[0.875rem,1vw,1rem] relative inline-block leading-[1.2em] text-[var(--headerColor)] after:absolute after:bottom-[-0.125rem] after:left-0 after:hidden after:h-px after:w-full after:bg-current hover:after:block lg:leading-[1.5em] lg:text-[var(--bodyTextColor)] lg:after:h-0.5 lg:after:w-0 lg:after:bg-[var(--primary)] lg:after:transition-[width] lg:after:duration-300 lg:hover:after:w-full"
            >
              About
            </a>
          </li>
          <li
            class="w-full -translate-y-[4.375rem] list-none text-center opacity-0 transition-all delay-[0.15s] duration-[0.6s,0.9s] lg:w-auto lg:translate-y-0 lg:py-8 lg:opacity-100"
          >
            <a
              href=""
              class="text-clamp-[1rem,2.5vw,1.5rem] lg:text-clamp-[0.875rem,1vw,1rem] relative inline-block leading-[1.2em] text-[var(--headerColor)] after:absolute after:bottom-[-0.125rem] after:left-0 after:hidden after:h-px after:w-full after:bg-current hover:after:block lg:leading-[1.5em] lg:text-[var(--bodyTextColor)] lg:after:h-0.5 lg:after:w-0 lg:after:bg-[var(--primary)] lg:after:transition-[width] lg:after:duration-300 lg:hover:after:w-full"
            >
              Services
            </a>
          </li>
          <li
            class="w-full -translate-y-[4.375rem] list-none text-center opacity-0 transition-all delay-[0.2s] duration-[0.6s,0.9s] lg:w-auto lg:translate-y-0 lg:py-8 lg:opacity-100"
          >
            <a
              href=""
              class="text-clamp-[1rem,2.5vw,1.5rem] lg:text-clamp-[0.875rem,1vw,1rem] relative inline-block leading-[1.2em] text-[var(--headerColor)] after:absolute after:bottom-[-0.125rem] after:left-0 after:hidden after:h-px after:w-full after:bg-current hover:after:block lg:leading-[1.5em] lg:text-[var(--bodyTextColor)] lg:after:h-0.5 lg:after:w-0 lg:after:bg-[var(--primary)] lg:after:transition-[width] lg:after:duration-300 lg:hover:after:w-full"
            >
              About Us
            </a>
          </li>
          <li
            class="w-full -translate-y-[4.375rem] list-none text-center opacity-0 transition-all delay-[0.25s] duration-[0.6s,0.9s] lg:w-auto lg:translate-y-0 lg:py-8 lg:opacity-100"
          >
            <a
              href=""
              class="text-clamp-[1rem,2.5vw,1.5rem] lg:text-clamp-[0.875rem,1vw,1rem] relative inline-block leading-[1.2em] text-[var(--headerColor)] after:absolute after:bottom-[-0.125rem] after:left-0 after:hidden after:h-px after:w-full after:bg-current hover:after:block lg:leading-[1.5em] lg:text-[var(--bodyTextColor)] lg:after:h-0.5 lg:after:w-0 lg:after:bg-[var(--primary)] lg:after:transition-[width] lg:after:duration-300 lg:hover:after:w-full"
            >
              FAQ
            </a>
          </li>
        </ul>
      </div>
    </nav>
    <ThemeToggle />
  </div>
</header>

<script>
  // Mobile menu toggle functionality
  document.addEventListener("DOMContentLoaded", function () {
    const toggle = document.querySelector(".cs-toggle");
    const nav = document.querySelector("#cs-navigation");
    const menu = document.querySelector(".cs-ul-wrapper");

    if (toggle && nav && menu) {
      toggle.addEventListener("click", function () {
        nav.classList.toggle("cs-active");

        // Toggle menu visibility with Tailwind classes
        if (menu.classList.contains("opacity-0")) {
          menu.classList.remove("opacity-0", "scale-y-0");
          menu.classList.add("opacity-100", "scale-y-100", "pb-10");
          document.body.classList.add("overflow-hidden");

          // Set all list items to visible
          document.querySelectorAll(".cs-li").forEach((item) => {
            item.classList.remove("opacity-0", "-translate-y-[4.375rem]");
            item.classList.add("opacity-100", "translate-y-0");
          });
        } else {
          menu.classList.add("opacity-0", "scale-y-0");
          menu.classList.remove("opacity-100", "scale-y-100", "pb-10");
          document.body.classList.remove("overflow-hidden");

          // Set all list items to hidden
          document.querySelectorAll(".cs-li").forEach((item) => {
            item.classList.add("opacity-0", "-translate-y-[4.375rem]");
            item.classList.remove("opacity-100", "translate-y-0");
          });
        }
      });
    }
  });
</script>
